# 开发计划 (Development Plan)

## 项目开发路线图

本文档详细规划了二次复盘系统的开发优先级和时间安排，确保项目有序推进。

## 功能优先级分类

### 🔴 P0 - 核心功能 (必须实现)
这些功能是系统正常运行的基础，需要优先开发。

#### 1. 缺陷超限预警页面 ✅
- **优先级**: P0
- **预估工时**: 3-5天
- **依赖**: 无
- **描述**: 实现缺陷数量超限时的预警机制
- **主要功能**:
  - 超限阈值设置
  - 预警规则配置
  - 历史数据查看
  - 预警记录管理
  - Number Stepper数字输入组件
  - 双击编辑功能
- **完成时间**: 2024-12-19

#### 2. 单图审图功能
- **优先级**: P0
- **预估工时**: 5-7天
- **依赖**: 图片上传组件
- **描述**: 单张图片的缺陷检测和标注功能
- **主要功能**:
  - 图片上传和预览
  - 缺陷标注工具
  - 检测结果展示
  - 标注数据保存

#### 3. 基础数据持久化
- **优先级**: P0
- **预估工时**: 4-6天
- **依赖**: 后端API设计
- **描述**: 实现基本的数据存储和读取
- **主要功能**:
  - 配置数据保存
  - 预警规则存储
  - 用户偏好设置
  - 基础数据备份

### 🟡 P1 - 重要功能 (应该实现)
这些功能能显著提升用户体验和系统价值。

#### 1. 趋势分析页面 (Trends Analysis) ✅
- **优先级**: P1
- **预估工时**: 4-6天
- **依赖**: ECharts CDN集成
- **描述**: 实现Yield Advisor仪表盘，包含图表、数据表格和筛选功能
- **主要功能**:
  - ✅ 6个半圆形仪表盘显示Yield指标（1st Yield, 2nd Yield, Total Yield等）
  - ✅ Yield Views汇总数据表格（Item#, Total, Defected, Non-defected, Yield等）
  - ✅ Top 10缺陷类型统计表（缺陷类型、数量、阈值等）
  - ✅ 右侧筛选面板（日期范围、Job Name、Lot Name、Layer Name、Barcode）
  - ✅ 完整的亮色主题适配，与系统风格保持一致
  - ✅ 响应式设计和交互效果
  - ✅ 自适应图表颜色（绿色≥90%，黄色75-89%，红色<75%）
  - ✅ 窗口resize事件处理，确保图表自适应
  - ✅ 筛选条件变化监听和提示功能
  - ✅ 路由系统集成，支持页面切换时图表重新渲染
  - ✅ UI布局优化：单行6列仪表盘布局，节省垂直空间
  - ✅ 刻度线恢复：显示刻度线和分割线，提升数据可读性
  - ✅ 重叠问题解决：优化文字和进度条位置，避免重叠
  - ✅ 响应式优化：适配小屏幕显示，防止布局错乱
- **技术要求**:
  - ✅ 集成ECharts 5.4.3 CDN
  - ✅ 模块化JavaScript架构（TrendsPage对象）
  - ✅ 模拟数据生成，包含Yield数据、汇总数据、缺陷统计数据
  - ✅ 自适应图表颜色和样式
  - ✅ 窗口resize事件处理
  - ✅ 路由系统特殊处理，解决ECharts在隐藏Tab中无法渲染的问题
  - ✅ CSS Grid布局优化，实现单行6列响应式布局
  - ✅ ECharts配置精细调优，解决空间利用率和可读性问题
- **完成时间**: 2025-12-20

#### 2. 多图审图功能
- **优先级**: P1
- **预估工时**: 7-10天
- **依赖**: 单图审图功能
- **描述**: 批量图片处理和对比分析
- **主要功能**:
  - 批量图片上传
  - 并行处理
  - 结果对比
  - 批量导出

#### 3. 报表系统 - Mapping ✅
- **优先级**: P1
- **预估工时**: 4-6天
- **依赖**: 数据持久化
- **描述**: 缺陷分布映射和可视化
- **主要功能**:
  - 缺陷分布图
  - 热力图展示
  - 数据筛选
  - 图表导出
- **完成时间**: 2025-12-20 (基础功能实现)

#### 4. 机台管理 ✅
- **优先级**: P1
- **预估工时**: 3-4天
- **依赖**: 无
- **描述**: AOI/VRS设备实时监控与管理
- **主要功能**:
  - ✅ 机台卡片网格布局，实时状态显示
  - ✅ 状态指示灯（运行中、待机、故障、离线）
  - ✅ 核心信息展示（机台名称、当前料号、IP地址、复判进度）
  - ✅ 快捷操作按钮（编辑、日志、重启服务）
  - ✅ 右侧详情抽屉，显示完整配置信息
  - ✅ 添加机台模态框，支持设备配置
  - ✅ 搜索过滤功能，按名称/IP过滤
  - ✅ 报警记录管理，按严重程度分类
  - ✅ 响应式设计，支持多屏幕尺寸
- **完成时间**: 2025-12-23

#### 5. 其他生产配置管理
- **优先级**: P1
- **预估工时**: 6-8天
- **依赖**: 数据持久化
- **描述**: 生产参数和设备管理
- **主要功能**:
  - 版类型管理 ✅
    - Master-Detail布局设计
    - 版型列表和搜索功能
    - 参数设置表单和验证
    - 可视化预览区和实时联动
    - 数据持久化和交互优化
  - 料号管理
  - 模型管理
  - 参数模板
- **完成时间**: 2025-12-23 (版类型管理)

### 🟢 P2 - 增强功能 (可以实现)
这些功能能进一步完善系统，但不是必需的。

#### 1. 用户认证系统
- **优先级**: P2
- **预估工时**: 5-7天
- **依赖**: 后端API
- **描述**: 用户登录和权限管理
- **主要功能**:
  - 用户注册登录
  - 角色权限管理
  - 操作日志记录
  - 安全控制

#### 2. 数据导出功能
- **优先级**: P2
- **预估工时**: 3-4天
- **依赖**: 报表系统
- **描述**: 各类数据的导出功能
- **主要功能**:
  - Excel导出
  - PDF报告生成
  - 图片批量下载
  - 自定义导出模板

#### 3. 实时数据更新
- **优先级**: P2
- **预估工时**: 4-6天
- **依赖**: WebSocket支持
- **描述**: 实时数据同步和推送
- **主要功能**:
  - 实时状态更新
  - 消息推送
  - 数据同步
  - 离线缓存

### 🔵 P3 - 优化功能 (可选实现)
这些功能用于性能优化和用户体验提升。

#### 1. 系统设置管理
- **优先级**: P3
- **预估工时**: 2-3天
- **依赖**: 用户认证
- **描述**: 系统参数和个性化设置
- **主要功能**:
  - 系统参数配置
  - 主题切换
  - 语言设置
  - 快捷键配置

#### 2. 日志记录和审计
- **优先级**: P3
- **预估工时**: 3-4天
- **依赖**: 用户认证
- **描述**: 操作日志和系统审计
- **主要功能**:
  - 操作日志记录
  - 异常日志监控
  - 审计报告生成
  - 日志分析

#### 3. 多语言支持
- **优先级**: P3
- **预估工时**: 2-3天
- **依赖**: 无
- **描述**: 国际化多语言界面
- **主要功能**:
  - 中英文切换
  - 语言包管理
  - 动态语言加载
  - 本地化配置

## 开发阶段规划

### 第一阶段 (2周) - 核心功能开发
**目标**: 完成P0级别的核心功能

**Week 1**:
- [x] 缺陷超限预警页面开发 (2024-12-19)
- [x] 基础数据持久化实现 (本地存储) (2025-12-20)
- [x] 后端API基础框架 (设计阶段) (2025-12-20)
- [x] 集成单页面应用系统 (2025-12-20)
- [x] 日志管理系统实现 (2025-12-20)
- [x] 模块化重构完成 (2025-12-20)

**Week 2**:
- [x] 趋势分析页面开发 (2025-12-20)
- [ ] 单图审图功能开发
- [ ] 图片上传组件实现
- [ ] 基础功能测试和调试
- [ ] Mapping页面功能完善

### 第二阶段 (2周) - 重要功能扩展
**目标**: 完成P1级别的重要功能

**Week 3**:
- [ ] 多图审图功能开发
- [ ] 报表系统 - Mapping实现
- [ ] 数据可视化组件

**Week 4**:
- [ ] 生产配置管理开发
- [ ] 系统集成测试
- [ ] 性能优化

### 第三阶段 (2周) - 增强功能完善
**目标**: 完成P2级别的增强功能

**Week 5**:
- [ ] 用户认证系统实现
- [ ] 权限管理功能
- [ ] 数据导出功能

**Week 6**:
- [ ] 实时数据更新功能
- [ ] 系统稳定性测试
- [ ] 用户体验优化

### 第四阶段 (1周) - 优化和发布
**目标**: 完成P3级别功能，准备发布

**Week 7**:
- [ ] 系统设置管理
- [ ] 日志记录功能
- [ ] 最终测试和文档完善

## 技术债务管理

### 当前技术债务
1. **代码模块化**: 当前代码集中在单个HTML文件中，需要拆分 ✅ 已完成
2. **组件复用**: 缺少可复用的UI组件库
3. **错误处理**: 缺少统一的错误处理机制
4. **测试覆盖**: 没有自动化测试

### 偿还计划
- **Week 2**: 代码模块化重构 ✅ 已完成 (2025-12-20)
- **Week 4**: 建立组件库
- **Week 6**: 完善错误处理
- **Week 7**: 添加基础测试

## 风险评估

### 高风险项
1. **后端API依赖**: 可能影响前端开发进度
2. **图片处理性能**: 大图片处理可能影响用户体验
3. **数据同步**: 实时数据同步的技术复杂度

### 风险缓解措施
1. **Mock数据**: 使用模拟数据进行前端开发
2. **性能优化**: 图片压缩和懒加载
3. **分阶段实现**: 先实现基础功能，再优化性能

## 资源需求

### 人力资源
- **前端开发**: 1-2人
- **后端开发**: 1人
- **UI设计**: 1人（兼职）
- **测试**: 1人（兼职）

### 技术资源
- **开发环境**: 现代浏览器和开发工具
- **测试环境**: 独立的测试服务器
- **部署环境**: 生产服务器和CDN

## 质量保证

### 代码质量
- 代码审查制度
- 统一的编码规范
- 自动化代码检查
- 测试驱动开发
- 模块化可维护性

### 测试策略
- 单元测试
- 集成测试
- 用户验收测试
- 性能指标
- 页面加载时间 < 3秒
- 图片处理响应时间 < 5秒
- 系统可用性 > 99%

---

**文档版本**: v2.0
**创建日期**: 2024-12-19
**最后更新**: 2025-12-23
**下次评审**: 2025-12-27